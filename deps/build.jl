deps_jl = "deps.jl"

if isfile(deps_jl)
  rm(deps_jl)
end

if !haskey(ENV,"MKLROOT")
  s = """
  Environment variable MKLROOT not found.
  
  Please install intel mkl math lbrary and rebuild.
  """
  error(s)
end

mklroot = ENV["MKLROOT"]

@info "MKLROOT found at: $mklroot"

mkllibdir = joinpath(mklroot,"lib/intel64")


if ! isdir(mkllibdir)
  s = """
  MKL lib directory not found: $mkllibdir
  """
  error(s)
end

@info "MKL libraries found at: $mkllibdir"

gcclibdir = "/usr/lib/gcc/x86_64-linux-gnu/6"

if ! isdir(gcclibdir)
  s = """
  gcc lib directory not found: $gcclibdir
  """
  error(s)
end

@info "gcc libraries found at: $gcclibdir"

open(deps_jl,"w") do f
  println(f, "# This file is automatically generated")
  println(f, "# Do not edit")
  println(f)
  println(f, :(const mklroot = $mklroot))
  println(f, :(const mkllibdir = $mkllibdir))
  println(f, :(const gcclibdir = $gcclibdir))
end

